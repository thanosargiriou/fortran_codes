      program makemet
C***********************************************************************
C     THIS PROGRAM JOINS THE SIX SINGLE COLUMN FILES EACH ONE CONTAINING
C     THE NECESSARY WEATHER PARAMETER FOR THE CREATION OF AN ESP WEATHER 
C     ASCII FILE.
C     THE PARAMETERS ARE NOT REWRITTEN AS IN THE ORIGINAL FILES BUT THEY
C     ARE CONVERTED INTO INTEGERS.
C     PRIOR TO INTEGER CONVERSION THE AMBIENT TEMPERATURE AND WIND VELO-
C     CITY VALUES ARE MULTIPLIED BY 10 IN ORDER TO PRESERVE INFORMATION.
C     THE NAMES OF THE RELEVANT FILES MUST BE ENTERED IN THE FILE 
C     MAKEMET.IN, IN THE FOLLOWING ORDER:
C     DIFFUSE RADIATION, AMBIENT TEMPERATURE, GLOBAL RADIATION, WIND
C     VELOCITY, WIND DIRECTION, RELATIVE HUMIDITY.  
C
C     ATHANASSIOS A. ARGIROU, 11-4-1994
C***********************************************************************
      DIMENSION LUN(6),NX(6),X(6)	
      CHARACTER*10 INAME(6)
C
C READS THE NAMES OF THE INPUT FILES
C
      OPEN(100,FILE='MAKEMET.IN')
      DO I=1,6
      READ(100,'(A)')INAME(I)
      ENDDO
      CLOSE(100)

C
C ATTRIBUTES LOGICAL UNIT NUMBERS TO THE INPUT FILES AND OPENS THEM
C
      DO I=1,6
      LUN(I)=500+I
      OPEN(LUN(I),FILE=INAME(I))
      ENDDO
C
C OUTPUT FILE
C
      OPEN(999,FILE='ESPMET.ASC')
C
C READS THE DATA
C
 20   CONTINUE
      DO I=1,6
      READ(LUN(I),*,ERR=90)X(I)
      ENDDO
C
C MAKES THE NECESSARY MODIFICATIONS
C
      NX(1)=NINT(X(1))
      NX(2)=NINT(X(2))*10
      NX(3)=NINT(X(3))
      NX(4)=NINT(X(4))*10
      NX(5)=NINT(X(5))
      NX(6)=NINT(X(6))   
      WRITE(999,'(6I10)')(NX(I),I=1,6)
      GOTO 20
 90   CONTINUE
C
C CLOSES ALL FILES
C
      DO I=1,6
      CLOSE(LUN(I))
      ENDDO
      CLOSE(999)
C
      END